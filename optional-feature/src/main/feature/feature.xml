<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<features name="${project.artifactId}-${project.version}" xmlns="http://karaf.apache.org/xmlns/features/v1.3.0">

  <feature name="instana-agent-configuration-integration-vault" version="1.0.9">
    <bundle start-level="80">mvn:com.instana/agent-configuration-integration-vault/1.0.9</bundle>
    <bundle>wrap:mvn:com.bettercloud/vault-java-driver/5.1.0</bundle>
  </feature>

  <feature name="instana-agent-grpc-core" version="1.0.11">
    <feature version="[1.0.0,2)">instana-agent-api</feature>
    <bundle start-level="80">mvn:com.instana/agent-grpc/1.0.11</bundle>
    <bundle start-level="80">wrap:mvn:com.google.protobuf/protobuf-java/3.21.5</bundle>
    <bundle start-level="80">wrap:mvn:com.google.protobuf/protobuf-java-util/3.21.5</bundle>
    <bundle start-level="80">mvn:commons-codec/commons-codec/1.15</bundle>
    <!-- all grpc transitive dependencies -->
    <bundle start-level="80">wrap:mvn:io.perfmark/perfmark-api/0.25.0</bundle>
    <bundle start-level="80">wrap:mvn:com.google.api.grpc/proto-google-common-protos/2.0.1</bundle>
    <bundle start-level="80">wrap:mvn:com.google.code.findbugs/jsr305/3.0.2</bundle>
    <bundle start-level="80">wrap:mvn:com.google.code.gson/gson/2.8.9</bundle>
    <bundle start-level="80">wrap:mvn:com.google.guava/guava/31.1-jre</bundle>
    <bundle start-level="80">wrap:mvn:com.google.guava/failureaccess/1.0.1</bundle>
    <bundle start-level="80">wrap:mvn:com.google.guava/listenablefuture/9999.0-empty-to-avoid-conflict-with-guava</bundle>
  </feature>

  <!-- everything up to and including OpenTelemetry service layer -->
  <feature name="instana-agent-open-telemetry-base" version="1.0.8">
    <feature version="[1.0.0,2)">instana-agent-grpc-core</feature>
    <bundle start-level="80">mvn:com.instana/agent-open-telemetry-base/1.0.8</bundle>
    <bundle start-level="80">mvn:com.instana/agent-open-telemetry-service/1.0.8</bundle>
  </feature>

  <!-- OpenTelemetry collector using gRPC -->
  <feature name="instana-agent-open-telemetry" version="1.0.15">
    <feature version="[1.0.8,2)">instana-agent-open-telemetry-base</feature>
    <bundle start-level="80">mvn:com.instana/agent-open-telemetry-grpc/1.0.8</bundle>
  </feature>

  <!-- OpenTelemetry collector using HTTP -->
  <feature name="instana-agent-open-telemetry-http" version="1.0.8">
    <feature version="[1.0.6,2)">instana-agent-internal-api</feature>
    <feature version="[1.0.8,2)">instana-agent-open-telemetry-base</feature>
    <bundle start-level="80">mvn:com.instana/agent-http/1.0.5</bundle>
    <bundle start-level="80">mvn:com.instana/agent-open-telemetry-http-api/1.0.5</bundle>
    <bundle start-level="80">mvn:com.instana/agent-open-telemetry-http/1.0.8</bundle>
  </feature>

  <feature name="instana-agent-prometheus" version="1.0.10">
    <feature version="[1.1.587,2)">instana-agent</feature>
    <bundle start-level="80">mvn:com.instana/agent-prometheus/1.0.10</bundle>
    <bundle start-level="80">wrap:mvn:com.google.protobuf/protobuf-java/3.19.6</bundle>
  </feature>
</features>
